{"version":3,"file":"23.c15bd2e4fe7f4091bc8c.bundle.js","sources":["webpack:///./packages/RangeFilter/src/index.tsx"],"sourcesContent":["import withUtils from \"@blaze-react/utils\";\nimport React, { Fragment, FunctionComponent, useEffect, useState } from \"react\";\n\ninterface IErrorMessage {\n  message: string | JSX.Element;\n  icon?: string;\n}\ninterface IRangeValue {\n  value?: string;\n  step?: number;\n  min?: number;\n  max?: number;\n}\ninterface IRangeFilterProps {\n  label?: string;\n  modifier?: string;\n  name?: string;\n  id?: string;\n  onChange: ({\n    event,\n    value\n  }: {\n    event?: React.ChangeEvent<HTMLInputElement>;\n    value: IRangeValue;\n  }) => void;\n  required?: boolean;\n  error?: boolean;\n  validationMessage: string | JSX.Element;\n  value: IRangeValue | any;\n  utils: {\n    classNames: (className: string | object, classNames?: object) => string;\n    ErrorMessage: FunctionComponent<IErrorMessage>;\n  };\n}\n\nconst RangeFilter: FunctionComponent<IRangeFilterProps> = ({\n  label,\n  modifier,\n  onChange,\n  required,\n  error,\n  validationMessage,\n  value,\n  name,\n  utils: { classNames, ErrorMessage },\n  ...attrs\n}): JSX.Element => {\n  const [inputs, setInputs] = useState<any>(value);\n  const [newError, setError] = useState<boolean | undefined>(error);\n\n  useEffect(() => {\n    setError(error);\n  }, [error]);\n\n  useEffect(() => {\n    setInputs(value);\n    onChange({ value });\n  }, [value]);\n\n  const handleChange = (\n    event: React.ChangeEvent<HTMLInputElement> | any,\n    key: string\n  ): void => {\n    const {\n      target: { value: targetValue }\n    } = event;\n\n    const newValues = {\n      ...inputs,\n      [key]: {\n        ...inputs[key],\n        value: parseFloat(targetValue)\n      }\n    };\n\n    setInputs(newValues);\n\n    onChange({ event, value: newValues });\n  };\n\n  const modifierClassName: string = classNames({\n    [`form-field--${modifier}`]: !!modifier\n  });\n\n  const requiredClassName: string = classNames({ required });\n\n  return (\n    <div className={`form-field form-field--range ${modifierClassName}`}>\n      {label && (\n        <label htmlFor={attrs.id} className={requiredClassName}>\n          {label}\n        </label>\n      )}\n      <div className=\"range_fields\">\n        {Object.keys(inputs).map(key => (\n          <Fragment key={key}>\n            <input\n              type=\"range\"\n              data-testid={`input_${key}`}\n              data-key={key}\n              name={`${name}${key}`}\n              onChange={e => handleChange(e, key)}\n              {...inputs[key]}\n              {...attrs}\n            />\n            <span>{inputs[key].value}</span>\n          </Fragment>\n        ))}\n      </div>\n\n      {newError && <ErrorMessage message={validationMessage} />}\n    </div>\n  );\n};\n\nRangeFilter.defaultProps = {\n  error: false,\n  label: \"\",\n  modifier: \"\",\n  name: \"\",\n  validationMessage: \"This field is required\"\n};\n\nexport default withUtils(RangeFilter);\n"],"mappings":"AAAA","sourceRoot":""}