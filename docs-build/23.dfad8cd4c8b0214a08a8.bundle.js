(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{2456:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var lib=__webpack_require__(12),lib_default=__webpack_require__.n(lib),react=__webpack_require__(0),react_default=__webpack_require__.n(react),react_dom=__webpack_require__(58),react_dom_default=__webpack_require__.n(react_dom);const SEPARATION_BETWEEN_HANDLERS=26;function getAttributes(parent,attributes){return attributes.map(attribute=>parseFloat(parent.getAttribute(attribute)))}function createFunction({attributes:attributes,ctx:ctx,parent:parent,type:type}){const[callback,minValue,maxValue]=getAttributes(parent,attributes);if(callback){new Function("min, max",callback)(minValue,maxValue)}ctx[type]&&ctx[type](minValue,maxValue)}const RangeFilter=function(currentElement){let startX=0,xAxis=0;const slider=react_dom_default.a.findDOMNode(currentElement),{touchLeft:touchLeft,touchRight:touchRight,lineSpan:lineSpan}=function getElements(parent){return{touchLeft:parent.querySelector(".filter--left"),touchRight:parent.querySelector(".filter--right"),lineSpan:parent.querySelector(".filter--line span")}}(slider),attributes=getAttributes(slider,["min","max","min-value","max-value","step"]),[min,max,...defaultAttributes]=attributes;let[defaultMinValue=min,defaultMaxValue=max,step=0]=defaultAttributes;step=Math.abs(step),defaultMinValue<min&&(defaultMinValue=min),defaultMaxValue>max&&(defaultMaxValue=max),defaultMinValue>defaultMaxValue&&(defaultMinValue=defaultMaxValue),this.reset=()=>{xAxis=0,startX=0,touchLeft.style.left="0px",lineSpan.style.marginLeft="0px",lineSpan.style.width=`${slider.offsetWidth-touchLeft.offsetWidth}px`,touchRight.style.left=`${slider.offsetWidth-touchLeft.offsetWidth}px`},this.setValue=({typeValue:typeValue,attribute:attribute,isRight:isRight})=>{const ratio=(typeValue-min)/(max-min);(isRight?touchRight:touchLeft).style.left=function getLeftStyle({ratio:ratio,parent:parent,handler:handler,isRight:isRight}){const factor=isRight?SEPARATION_BETWEEN_HANDLERS:0;return`${Math.ceil(ratio*(parent.offsetWidth-(handler.offsetWidth+SEPARATION_BETWEEN_HANDLERS))+factor)}px`}({handler:touchLeft,isRight:isRight,parent:slider,ratio:ratio}),lineSpan.style.marginLeft=`${touchLeft.offsetLeft}px`,lineSpan.style.width=`${touchRight.offsetLeft-touchLeft.offsetLeft}px`,slider.setAttribute(attribute,typeValue)},this.setMinValue=minValue=>{this.setValue({attribute:"min-value",typeValue:minValue})},this.setMaxValue=maxValue=>{this.setValue({attribute:"max-value",isRight:!0,typeValue:maxValue})},this.reset();const maxX=slider.offsetWidth-touchRight.offsetWidth;let selectedTouch=null;const initialValue=lineSpan.offsetWidth-SEPARATION_BETWEEN_HANDLERS;function onStart(event){event.preventDefault();let eventTouch=event.touches?[eventTouch]=event.touches:event;xAxis=this===touchLeft?touchLeft.offsetLeft:touchRight.offsetLeft,startX=eventTouch.pageX-xAxis,selectedTouch=this,slider.addEventListener("mousemove",onMove),slider.addEventListener("mouseup",onStop),slider.addEventListener("touchmove",onMove),slider.addEventListener("touchend",onStop)}this.setMinValue(defaultMinValue),this.setMaxValue(defaultMaxValue);const calculateValue=()=>{const newValue=(lineSpan.offsetWidth-SEPARATION_BETWEEN_HANDLERS)/initialValue;let minValue=lineSpan.offsetLeft/initialValue,maxValue=minValue+newValue;if(minValue=minValue*(max-min)+min,maxValue=maxValue*(max-min)+min,step){let multi=Math.floor(minValue/step);minValue=step*multi,multi=Math.floor(maxValue/step),maxValue=step*multi}slider.setAttribute("min-value",minValue),slider.setAttribute("max-value",maxValue)},onMove=event=>{let eventTouch=event.touches?[eventTouch]=event.touches:event;xAxis=eventTouch.pageX-startX,selectedTouch===touchLeft&&(xAxis>touchRight.offsetLeft-selectedTouch.offsetWidth+10&&(xAxis=touchRight.offsetLeft-selectedTouch.offsetWidth+10),xAxis<0&&(xAxis=0)),selectedTouch===touchRight&&(xAxis<touchLeft.offsetLeft+touchLeft.offsetWidth-10&&(xAxis=touchLeft.offsetLeft+touchLeft.offsetWidth-10),xAxis>maxX&&(xAxis=maxX)),selectedTouch.style.left=`${xAxis}px`,lineSpan.style.marginLeft=`${touchLeft.offsetLeft}px`,lineSpan.style.width=`${touchRight.offsetLeft-touchLeft.offsetLeft}px`,calculateValue(),createFunction({attributes:["on-change","min-value","max-value"],ctx:this,parent:slider,type:"onChange"})},onStop=()=>{slider.removeEventListener("mousemove",onMove),slider.removeEventListener("mouseup",onStop),slider.removeEventListener("touchmove",onMove),slider.removeEventListener("touchend",onStop),selectedTouch=null,calculateValue(),createFunction({attributes:["did-changed","min-value","max-value"],ctx:this,parent:slider,type:"didChanged"})};touchLeft.addEventListener("mousedown",onStart),touchRight.addEventListener("mousedown",onStart),touchLeft.addEventListener("touchstart",onStart),touchRight.addEventListener("touchstart",onStart)};var logic=function initRangeFilter(currentElement){return currentElement?new RangeFilter(currentElement):{}};const src_RangeFilter=({label:label,modifier:modifier,onChange:onChange,required:required,error:error,validationMessage:validationMessage,value:value,name:name,utils:{classNames:classNames,ErrorMessage:ErrorMessage},...attrs})=>{const[inputs,setInputs]=Object(react.useState)(value||{}),[newError,setError]=Object(react.useState)(error),filterRef=Object(react.useRef)(null);Object(react.useEffect)(()=>{setError(error)},[error]),Object(react.useEffect)(()=>{value&&(setInputs(value),onChange({value:value}))},[value]),Object(react.useEffect)(()=>{logic(filterRef.current).onChange=(minvalue,maxvalue)=>{const newValue={...inputs,minValue:minvalue,maxValue:maxvalue};onChange({value:newValue}),setInputs(newValue)}},[]);const modifierClassName=classNames({[`form-field--${modifier}`]:!!modifier}),requiredClassName=classNames({required:required}),{min:min=0,max:max=0,step:step=1,minValue:minValue=0,maxValue:maxValue=0}=inputs;return react_default.a.createElement("div",{className:`form-field form-field--range ${modifierClassName}`},label&&react_default.a.createElement("label",{htmlFor:attrs.id,className:requiredClassName},label),react_default.a.createElement("div",{className:"values"},react_default.a.createElement("span",null,minValue),react_default.a.createElement("span",null,maxValue)),react_default.a.createElement("div",{ref:filterRef,min:min,max:max,step:step,"min-value":minValue,"max-value":maxValue,id:`${name}Range`,className:"filter"},react_default.a.createElement("div",{className:"filter--left"},react_default.a.createElement("span",null)),react_default.a.createElement("div",{className:"filter--right"},react_default.a.createElement("span",null)),react_default.a.createElement("div",{className:"filter--line"},react_default.a.createElement("span",null))),newError&&react_default.a.createElement(ErrorMessage,{message:validationMessage}))};src_RangeFilter.defaultProps={error:!1,label:"",modifier:"",name:"",validationMessage:"This field is required"};__webpack_exports__.default=lib_default()(src_RangeFilter)}}]);
//# sourceMappingURL=23.dfad8cd4c8b0214a08a8.bundle.js.map