(self.webpackChunkblaze_react=self.webpackChunkblaze_react||[]).push([[28],{94028:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return src_RangeFilter}});var slicedToArray=__webpack_require__(28481),src=(__webpack_require__(82526),__webpack_require__(68309),__webpack_require__(19601),__webpack_require__(56959)),react=__webpack_require__(67294);var src_isContentLoaded=function isContentLoaded(init,reInit){document.addEventListener("DOMContentLoaded",init),"interactive"!==document.readyState&&"complete"!==document.readyState||init(),reInit(5e3)},arrayWithHoles=__webpack_require__(59968),iterableToArray=__webpack_require__(96410),unsupportedIterableToArray=__webpack_require__(82961),nonIterableRest=__webpack_require__(28970);__webpack_require__(21249),__webpack_require__(47042),__webpack_require__(41539),__webpack_require__(39714);function getAttributes(parent,attributes){return attributes.map((function(attribute){return parseFloat(parent.getAttribute(attribute))}))}function $(selector){return document.querySelector("."+selector)}var logic=function RangeFilter(selector,getMinMax){var startX=0,xAxis=0;if($(selector)){var isPassiveSupported=function checkPassiveCompatibility(){try{var opts=Object.defineProperty({},"passive",{get:function get(){return!1}});return window.addEventListener("checkPassive",null,opts),window.removeEventListener("checkPassive",null,opts),!0}catch(e){return!1}}(),_getElements=function getElements(parent){return{touchLeft:parent.querySelector(".range__filter--left"),touchRight:parent.querySelector(".range__filter--right"),lineSpan:parent.querySelector(".range__filter--line span")}}($(selector)),touchLeft=_getElements.touchLeft,touchRight=_getElements.touchRight,lineSpan=_getElements.lineSpan,_attributes=function _toArray(arr){return(0,arrayWithHoles.Z)(arr)||(0,iterableToArray.Z)(arr)||(0,unsupportedIterableToArray.Z)(arr)||(0,nonIterableRest.Z)()}(getAttributes($(selector),["min","max","min-value","max-value","step"])),min=_attributes[0],max=_attributes[1],defaultAttributes=_attributes.slice(2),_defaultAttributes=(0,slicedToArray.Z)(defaultAttributes,3),_defaultAttributes$=_defaultAttributes[0],defaultMinValue=void 0===_defaultAttributes$?min:_defaultAttributes$,_defaultAttributes$2=_defaultAttributes[1],defaultMaxValue=void 0===_defaultAttributes$2?max:_defaultAttributes$2,_defaultAttributes$3=_defaultAttributes[2],step=void 0===_defaultAttributes$3?0:_defaultAttributes$3;step=Math.abs(step),defaultMinValue<min&&(defaultMinValue=min),defaultMaxValue>max&&(defaultMaxValue=max),defaultMinValue>defaultMaxValue&&(defaultMinValue=defaultMaxValue);var setValue=function setValue(_ref2){var typeValue=_ref2.typeValue,attribute=_ref2.attribute,isRight=_ref2.isRight,ratio=(typeValue-min)/(max-min);(isRight?touchRight:touchLeft).style.left=function getLeftStyle(_ref){var ratio=_ref.ratio,parent=_ref.parent,handler=_ref.handler,factor=_ref.isRight?26:0;return Math.ceil(ratio*(parent.offsetWidth-(handler.offsetWidth+26))+factor)+"px"}({handler:touchLeft,isRight:isRight,parent:$(selector),ratio:ratio}),lineSpan.style.marginLeft=touchLeft.offsetLeft+"px",lineSpan.style.width=touchRight.offsetLeft-touchLeft.offsetLeft+"px",$(selector).setAttribute(attribute,typeValue)};!function reset(){xAxis=0,startX=0,touchLeft.style.left="0px",lineSpan.style.marginLeft="0px",lineSpan.style.width=$(selector).offsetWidth-touchLeft.offsetWidth+"px",touchRight.style.left=$(selector).offsetWidth-touchLeft.offsetWidth+"px"}();var maxX=$(selector).offsetWidth-touchRight.offsetWidth,selectedTouch=null,initialValue=lineSpan.offsetWidth-26;!function setMinValue(minValue){setValue({attribute:"min-value",typeValue:minValue})}(defaultMinValue),function setMaxValue(maxValue){setValue({attribute:"max-value",isRight:!0,typeValue:maxValue})}(defaultMaxValue);var calculateValue=function calculateValue(){var newValue=(lineSpan.offsetWidth-26)/initialValue,minValue=lineSpan.offsetLeft/initialValue,maxValue=minValue+newValue;if(minValue=minValue*(max-min)+min,maxValue=maxValue*(max-min)+min,step){var multi=Math.floor(minValue/step);minValue=step*multi,multi=Math.floor(maxValue/step),maxValue=step*multi}minValue>maxValue||$(selector).setAttribute("min-value",minValue.toString()),maxValue<minValue||$(selector).setAttribute("max-value",maxValue.toString())},onMove=function onMove(event){var eventTouch=event.touches?event.touches[0]:event;xAxis=eventTouch.pageX-startX,selectedTouch&&selectedTouch===touchLeft&&function setxAxisLeftPosition(){xAxis>touchRight.offsetLeft-selectedTouch.offsetWidth+10&&(xAxis=touchRight.offsetLeft-selectedTouch.offsetWidth+10),xAxis<0&&(xAxis=0)}(),selectedTouch&&selectedTouch===touchRight&&function setxAxisRightPosition(){xAxis<touchLeft.offsetLeft+touchLeft.offsetWidth-10&&(xAxis=touchLeft.offsetLeft+touchLeft.offsetWidth-10),xAxis>maxX&&(xAxis=maxX)}(),selectedTouch&&(selectedTouch.style.left=xAxis+"px"),lineSpan.style.marginLeft=touchLeft.offsetLeft+"px",lineSpan.style.width=touchRight.offsetLeft-touchLeft.offsetLeft+"px",calculateValue();var _getAttributes=getAttributes($(selector),["min-value","max-value"]),_getAttributes2=(0,slicedToArray.Z)(_getAttributes,2),minValue=_getAttributes2[0],maxValue=_getAttributes2[1];getMinMax(minValue,maxValue)},onStop=function onStop(){document.removeEventListener("click",onStop),$(selector).removeEventListener("mousemove",onMove),$(selector).removeEventListener("mouseup",onStop),$(selector).removeEventListener("touchmove",onMove),$(selector).removeEventListener("touchend",onStop),selectedTouch=null,calculateValue();var _getAttributes3=getAttributes($(selector),["min-value","max-value"]),_getAttributes4=(0,slicedToArray.Z)(_getAttributes3,2),minValue=_getAttributes4[0],maxValue=_getAttributes4[1];getMinMax(minValue,maxValue)};touchLeft.addEventListener("mousedown",onStart),touchRight.addEventListener("mousedown",onStart),touchLeft.addEventListener("touchstart",onStart,!!isPassiveSupported&&{passive:!0}),touchRight.addEventListener("touchstart",onStart,!!isPassiveSupported&&{passive:!0})}function onStart(event){event.defaultPrevented&&event.preventDefault();var eventTouch=event.touches?event.touches[0]:event;xAxis=this===touchLeft?touchLeft.offsetLeft:touchRight.offsetLeft,startX=eventTouch.pageX-xAxis,selectedTouch=this,$(selector).addEventListener("mousemove",onMove),$(selector).addEventListener("mouseup",onStop),$(selector).addEventListener("touchmove",onMove,!!isPassiveSupported&&{passive:!0}),$(selector).addEventListener("touchend",onStop),document.addEventListener("click",onStop)}},__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},RangeFilter_RangeFilter=function RangeFilter(_a){var _buildClassNames,label=_a.label,modifier=_a.modifier,onChange=_a.onChange,required=_a.required,error=_a.error,validationMessage=_a.validationMessage,value=_a.value,name=_a.name,id=_a.id,attrs=__rest(_a,["label","modifier","onChange","required","error","validationMessage","value","name","id"]),_useState=(0,react.useState)(value||{}),_useState2=(0,slicedToArray.Z)(_useState,2),inputs=_useState2[0],setInputs=_useState2[1],_useState3=(0,react.useState)(error),_useState4=(0,slicedToArray.Z)(_useState3,2),newError=_useState4[0],setError=_useState4[1];(0,react.useEffect)((function(){setError(error)}),[error]),(0,react.useEffect)((function(){src_isContentLoaded(init,reInit)}),[]);var getMinMax=function getMinMax(minvalue,maxvalue){var newValue=Object.assign(Object.assign({},inputs),{minValue:minvalue,maxValue:maxvalue});onChange({value:newValue}),setInputs(newValue)},init=function init(){logic(id,getMinMax)},reInit=function reInit(){var time=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;setTimeout(init,time)},modifierClassName=(0,src.g2)(((_buildClassNames={})["form-field--"+modifier]=!!modifier,_buildClassNames)),requiredClassName=(0,src.g2)({required:required}),_inputs$min=inputs.min,min=void 0===_inputs$min?0:_inputs$min,_inputs$max=inputs.max,max=void 0===_inputs$max?0:_inputs$max,_inputs$step=inputs.step,step=void 0===_inputs$step?1:_inputs$step,_inputs$minValue=inputs.minValue,minValue=void 0===_inputs$minValue?0:_inputs$minValue,_inputs$maxValue=inputs.maxValue,maxValue=void 0===_inputs$maxValue?0:_inputs$maxValue;return react.createElement("div",{className:"form-field form-field--range "+modifierClassName},label&&react.createElement("label",{htmlFor:id,className:requiredClassName},label),react.createElement("div",{className:"values"},react.createElement("span",null,minValue),react.createElement("span",null,maxValue)),react.createElement("div",Object.assign({},attrs,{min:min,max:max,step:step,"min-value":minValue,"max-value":maxValue,id:name+"Range",className:"range__filter "+id}),react.createElement("div",{className:"range__filter--left"},react.createElement("span",null)),react.createElement("div",{className:"range__filter--right"},react.createElement("span",null)),react.createElement("div",{className:"range__filter--line"},react.createElement("span",null))),newError&&react.createElement(src.Bc,{message:validationMessage}))};RangeFilter_RangeFilter.defaultProps={error:!1,label:"",modifier:"",name:"",validationMessage:"This field is required"};var src_RangeFilter=RangeFilter_RangeFilter;try{RangeFilter_RangeFilter.displayName="RangeFilter",RangeFilter_RangeFilter.__docgenInfo={description:"",displayName:"RangeFilter",props:{label:{defaultValue:{value:""},description:"",name:"label",required:!1,type:{name:"string"}},modifier:{defaultValue:{value:""},description:"",name:"modifier",required:!1,type:{name:"string"}},name:{defaultValue:{value:""},description:"",name:"name",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"({ event, value }: { event?: any; value: IRangeValue; }) => void"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},error:{defaultValue:{value:!1},description:"",name:"error",required:!1,type:{name:"boolean"}},validationMessage:{defaultValue:{value:"This field is required"},description:"",name:"validationMessage",required:!1,type:{name:"string | Element"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/RangeFilter/src/RangeFilter.tsx#RangeFilter"]={docgenInfo:RangeFilter_RangeFilter.__docgenInfo,name:"RangeFilter",path:"packages/RangeFilter/src/RangeFilter.tsx#RangeFilter"})}catch(__react_docgen_typescript_loader_error){}}}]);
//# sourceMappingURL=28.89466325.iframe.bundle.js.map